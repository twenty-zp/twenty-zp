<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> 算法4-将罗马数字转换为整数 · Twenty's 时间念</title><meta name="description" content="算法4-将罗马数字转换为整数 - Twenty's 时间念"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon1.png"><link rel="stylesheet" href="/css/apollo.css"><script src="/baiduAnalyse.js"></script><link rel="search" type="application/opensearchdescription+xml" href="http://blog.img421.com/atom.xml" title="Twenty's 时间念"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="https://github.com/twenty-zp" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">算法4-将罗马数字转换为整数</h1><div class="post-info">Oct 27, 2016</div><div class="post-content"><h2 id="给出一个罗马数-将其转换为整数"><a href="#给出一个罗马数-将其转换为整数" class="headerlink" title="给出一个罗马数,将其转换为整数."></a>给出一个罗马数,将其转换为整数.</h2><p>保证范围为1-3999.</p>
<p><a href="https://github.com/twenty-zp/LeetCodeAlgorithm.git" target="_blank" rel="external">源代码</a></p>
<blockquote>
<p>罗马数字采用七个罗马字母作数字、即Ⅰ（1）、X（10）、C（100）、M（1000）、V（5）、L（50）、D（500）</p>
</blockquote>
<p>计数方式 :    <a href="http://baike.baidu.com/link?url=OtUwcBrsZYHwhgHXm4HIxgVnrhU0bD5yNuxXYxSVP6flX8-CMXjuPU1aJcIIyHw4VnwLaquM6uhqhMi0ZXMdO_" target="_blank" rel="external">百度百科</a>、<a href="https://zh.wikipedia.org/zh-hans/%E7%BD%97%E9%A9%AC%E6%95%B0%E5%AD%97" target="_blank" rel="external">维基百科</a></p>
<ul>
<li>重复数次：一个罗马数字重复几次，就表示这个数的几倍。如 Ⅲ=3</li>
<li><p>右加左减</p>
<ul>
<li>小的数字在大的数字的右边，所表示的数等于这些数字相加得到的数，如 Ⅷ=8、Ⅻ=12</li>
<li>小的数字（限于 Ⅰ、X 和 C）在大的数字的左边，所表示的数等于大数减小数得到的数，如 Ⅳ=4、Ⅸ=9</li>
<li>右加数字不可连续超过三位，比如14写成XIV，而非XIIII。</li>
<li>左减数字必须为一位，比如8写成VIII，而非IIX。</li>
</ul>
</li>
<li><p>在罗马数字的上方加上一条横线或者加上下标的Ⅿ，表示将这个数乘以1000，即是原数的1000倍,如果上方有两条横线，即是原数的1000000倍。</p>
</li>
<li>数码限制：<ul>
<li>同一数码最多只能连续出现三次，如40不可表示为XXXX，而要表示为XL<br><a href="http://literacy.kent.edu/Minigrants/Cinci/romanchart.htm" target="_blank" rel="external">Roman Numerals Chart</a></li>
</ul>
</li>
</ul>
<h2 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h2><h4 id="1-通过枚举-enum"><a href="#1-通过枚举-enum" class="headerlink" title="1.通过枚举(enum)"></a>1.通过枚举(enum)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div></pre></td><td class="code"><pre><div class="line">enum Roman: String &#123;</div><div class="line">    case I, V, X, L, C, D, M</div><div class="line">    </div><div class="line">    func getRomanValue() -&gt; Int &#123;</div><div class="line">        switch self &#123;</div><div class="line">        case .I:</div><div class="line">            return 1</div><div class="line">        case .V:</div><div class="line">            return 5</div><div class="line">        case .X:</div><div class="line">            return 10</div><div class="line">        case .L:</div><div class="line">            return 50</div><div class="line">        case .C:</div><div class="line">            return 100</div><div class="line">        case .D:</div><div class="line">            return 500</div><div class="line">        case .M:</div><div class="line">            return 1000</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    //判断是否这三种类型，如果左边为三种则减</div><div class="line">    func isSubtract() -&gt; Bool &#123;</div><div class="line">        switch self &#123;</div><div class="line">        case .I,.X,.C :</div><div class="line">            return true</div><div class="line">        default:</div><div class="line">            return false</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">//0.根据索引获取字符串当前索引字符</div><div class="line">extension String  &#123;</div><div class="line">    </div><div class="line">    func characterAtIndex(index: Int) -&gt; Character? &#123;</div><div class="line">        var cur = 0</div><div class="line">        for char in self.characters &#123;</div><div class="line">            if cur == index &#123;</div><div class="line">                return char</div><div class="line">            &#125;</div><div class="line">            cur += 1</div><div class="line">        &#125;</div><div class="line">        return nil</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">//罗马数 -&gt; 整数</div><div class="line">class Solution &#123;</div><div class="line">    static func romanToInt(s: String) -&gt; Int &#123;</div><div class="line">        var intValue = 0</div><div class="line">        if s.characters.count == 1 &#123;</div><div class="line">            return Roman(rawValue: s)!.getRomanValue()</div><div class="line">        &#125;</div><div class="line">        //1.</div><div class="line">        let c_reversed = s.characters.reversed()</div><div class="line">        for (index,c) in c_reversed.enumerated() &#123;</div><div class="line">            </div><div class="line">            if (index+1) % 2  == 0 &#123;</div><div class="line">                continue</div><div class="line">            &#125;</div><div class="line">            </div><div class="line">            let roman_after = Roman(rawValue: String.init(c))</div><div class="line">            //2.</div><div class="line">            if (index+1 == s.characters.count) &#123;</div><div class="line">                return roman_after!.getRomanValue()+intValue</div><div class="line">            &#125;</div><div class="line">              </div><div class="line">            let c_curr = String(c_reversed).characterAtIndex(index: index+1)!</div><div class="line">            let roman =  Roman(rawValue: String.init(c_curr))</div><div class="line">      	  		//3.</div><div class="line">            if ((roman_after!.getRomanValue() &gt; roman!.getRomanValue()) &amp;&amp;  roman!.isSubtract())</div><div class="line">            &#123;</div><div class="line">                    intValue =  intValue + roman_after!.getRomanValue() - roman!.getRomanValue()</div><div class="line">            &#125;else</div><div class="line">            &#123;</div><div class="line">                    intValue =  intValue + roman_after!.getRomanValue() + roman!.getRomanValue()</div><div class="line">            &#125;</div><div class="line">           </div><div class="line">        &#125;</div><div class="line">        return intValue</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<ol>
<li>反转字符为字符数组.目的: 使罗马数从右向左依次计算</li>
<li>判断如果为最后一个,则整合全部的数</li>
<li>通过判断左边的字符值和右边的字符值比较大小，并且左边的字符符合罗马数I、X、L 时,则大的减去小的</li>
</ol>
</blockquote>
<p><strong>以上的枚举通过使用字典存储</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line">class Solution1 &#123;</div><div class="line"></div><div class="line">        var romanDic: [String: Int] = [&quot;I&quot;: 1,</div><div class="line">                                       &quot;V&quot;: 5,</div><div class="line">                                       &quot;X&quot;: 10,</div><div class="line">                                       &quot;L&quot;: 50,</div><div class="line">                                       &quot;C&quot;: 100,</div><div class="line">                                       &quot;D&quot;: 500,</div><div class="line">                                       &quot;M&quot;: 1000]</div><div class="line">        func romanToInt(s: String) -&gt; Int &#123;</div><div class="line">            if s.characters.count == 1 &#123;</div><div class="line">                return romanDic[s] == nil ? romanDic[s]! : 0</div><div class="line">        &#125;</div><div class="line">        //1.</div><div class="line">                let c_reversed = s.characters.reversed()</div><div class="line">        var intValue = 0</div><div class="line"></div><div class="line">        for (index,c) in c_reversed.enumerated() &#123;</div><div class="line">            if (index+1) % 2  == 0 &#123;</div><div class="line">                continue</div><div class="line">            &#125;</div><div class="line">            let c_after_value = romanDic[String(c)]!</div><div class="line">            </div><div class="line">            if (index+1) == s.characters.count&#123;</div><div class="line">                return c_after_value + intValue</div><div class="line">            &#125;</div><div class="line">            let c_curr = String(c_reversed).characterAtIndex(index: index+1)!</div><div class="line">            let c_curr_value = romanDic[String(c_curr)]!</div><div class="line">            if (c_after_value &gt; c_curr_value) &amp;&amp; (c_curr_value == 1 || c_curr_value == 10 || c_curr_value == 100)&#123;</div><div class="line">            intValue = intValue + c_after_value - c_curr_value</div><div class="line">            &#125;else</div><div class="line">            &#123;</div><div class="line">            intValue = intValue + c_after_value + c_curr_value</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">            return intValue</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<ol>
<li>对于根据索引获取字符串中的字符同样可以使用<br><strong>index(_ i: String.Index, offsetBy n: String.IndexDistance) -&gt; String.Index</strong> 获取得到</li>
</ol>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"> let s = &quot;Swift&quot;</div><div class="line"> let i = s.index(s.startIndex, offsetBy: 4)</div><div class="line"> print(s[i])</div><div class="line">// Prints &quot;t&quot;</div></pre></td></tr></table></figure>
<h2 id="测试"><a href="#测试" class="headerlink" title="测试:"></a>测试:</h2><p>使用一些特殊的罗马数进行测试:</p>
<p><strong>XIV  -&gt;  14</strong></p>
<p><img src="http://ocar0timh.bkt.clouddn.com/CC2275E1-39A6-4E5B-83BC-365C393C0BA4.png" alt=""></p>
</div></article></div></section><footer><div class="paginator"><a href="/2016/10/28/zui-chang-de-common-prefix/" class="prev">PREV</a><a href="/2016/10/25/算法3-回文整数/" class="next">NEXT</a></div><div class="copyright"><p>© 2015 - 2017 <a href="http://blog.img421.com">Twenty's 时间念</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-MML-AM_CHTML"></script></body></html>